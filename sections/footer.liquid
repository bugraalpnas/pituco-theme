{%- if section.settings.custom_background_color != blank -%}
  <style>
    .footer.color-{{ section.settings.color_scheme }} {
      background-color: {{ section.settings.custom_background_color }};
      --color-background: {{ section.settings.custom_background_color.red }}, {{ section.settings.custom_background_color.green }}, {{ section.settings.custom_background_color.blue }};
    }
  </style>
{%- endif -%}

{%- if section.settings.footer_text_color != blank -%}
  <style>
    .footer.color-{{ section.settings.color_scheme }} .footer__heading,
    .footer.color-{{ section.settings.color_scheme }} .footer__link,
    .footer.color-{{ section.settings.color_scheme }} .footer__copyright,
    .footer.color-{{ section.settings.color_scheme }} .footer__payment-text,
    .footer.color-{{ section.settings.color_scheme }} .list-social__item .icon {
      color: {{ section.settings.footer_text_color }};
    }
  </style>
{%- endif -%}

<link rel="stylesheet" href="{{ 'component-footer.css' | asset_url }}" media="print" onload="this.media='all'">



<footer class="footer color-{{ section.settings.color_scheme }} gradient">
  <div class="footer__content page-width">
    <div class="footer__content-top">
      <div class="footer__column footer__column--logo">
        {%- if section.settings.footer_logo != blank -%}
          <img src="{{ section.settings.footer_logo | image_url: width: section.settings.logo_width }}" 
               alt="{{ shop.name }}" 
               class="footer__logo" 
               style="width: {{ section.settings.logo_width }}px; height: auto;">
        {%- else -%}
          <img src="{{ 'footer-logo-lizard.png' | asset_url }}" alt="{{ shop.name }}" class="footer__logo" style="width: {{ section.settings.logo_width }}px; height: auto;">
        {%- endif -%}
        
        {%- if section.settings.show_social -%}
          <ul class="footer__social list-unstyled small-hide medium-hide" role="list">
            {%- if settings.social_facebook_link != blank -%}
              <li class="list-social__item">
                <a href="{{ settings.social_facebook_link }}" class="link">
                  {%- render 'icon-facebook' -%}
                </a>
              </li>
            {%- endif -%}
            {%- if settings.social_instagram_link != blank -%}
              <li class="list-social__item">
                <a href="{{ settings.social_instagram_link }}" class="link">
                  {%- render 'icon-instagram' -%}
                </a>
              </li>
            {%- endif -%}
            {%- if settings.social_tiktok_link != blank -%}
              <li class="list-social__item">
                <a href="{{ settings.social_tiktok_link }}" class="link">
                  {%- render 'icon-tiktok' -%}
                </a>
              </li>
            {%- endif -%}
            {%- if settings.social_youtube_link != blank -%}
              <li class="list-social__item">
                <a href="{{ settings.social_youtube_link }}" class="link">
                  {%- render 'icon-youtube' -%}
                </a>
              </li>
            {%- endif -%}
          </ul>
        {%- endif -%}
      </div>

      {%- for block in section.blocks -%}
        <div class="footer__column" {{ block.shopify_attributes }}>
            <h3 class="footer__heading" onclick="toggleFooter(this)">
              {%- if block.settings.heading != blank -%}
                {{ block.settings.heading }}
              {%- endif -%}
            </h3>
            <ul class="footer__list list-unstyled" role="list">
              {%- for i in (1..5) -%}
                {%- capture link_text_key -%}link_{{ i }}_text{%- endcapture -%}
                {%- capture link_url_key -%}link_{{ i }}_url{%- endcapture -%}
                {%- assign link_text = block.settings[link_text_key] -%}
                {%- assign link_url = block.settings[link_url_key] -%}
                
                {%- if link_text != blank -%}
                  <li><a href="{{ link_url }}" class="footer__link">{{ link_text }}</a></li>
                {%- endif -%}
              {%- endfor -%}
            </ul>
        </div>
      {%- endfor -%}

      <!-- Mobile Social Icons (Centered) -->
      <!-- Mobile Social Icons (Centered) -->
      <div class="footer__mobile-social large-up-hide" style="text-align: center; margin-top: 2rem; width: 100%; display: block;">
        <ul class="footer__social list-unstyled" role="list" style="justify-content: center; display: flex !important; flex-wrap: wrap; gap: 1rem;">
          {%- if settings.social_facebook_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_facebook_link }}" class="link">
                {%- render 'icon-facebook' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_instagram_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_instagram_link }}" class="link">
                {%- render 'icon-instagram' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_tiktok_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_tiktok_link }}" class="link">
                {%- render 'icon-tiktok' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_youtube_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_youtube_link }}" class="link">
                {%- render 'icon-youtube' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_twitter_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_twitter_link }}" class="link">
                {%- render 'icon-twitter' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_pinterest_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_pinterest_link }}" class="link">
                {%- render 'icon-pinterest' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_snapchat_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_snapchat_link }}" class="link">
                {%- render 'icon-snapchat' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_tumblr_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_tumblr_link }}" class="link">
                {%- render 'icon-tumblr' -%}
              </a>
            </li>
          {%- endif -%}
          {%- if settings.social_vimeo_link != blank -%}
            <li class="list-social__item">
              <a href="{{ settings.social_vimeo_link }}" class="link">
                {%- render 'icon-vimeo' -%}
              </a>
            </li>
          {%- endif -%}
        </ul>
      </div>
    </div>

    <div class="footer__content-bottom">
      <div class="footer__payment">
        {%- if section.settings.payment_heading != blank -%}
          <span class="footer__payment-text">{{ section.settings.payment_heading }}</span>
        {%- endif -%}
        <div class="footer__payment-icons">
          {%- if section.settings.payment_icon_1 != blank -%}
            <img src="{{ section.settings.payment_icon_1 | image_url: height: 30 }}" alt="Payment Method 1" style="height: 30px; width: auto;">
          {%- else -%}
            <img src="{{ 'icon-mastercard-custom.png' | asset_url }}" alt="Mastercard" style="height: 30px; width: auto;">
          {%- endif -%}

          {%- if section.settings.payment_icon_2 != blank -%}
            <img src="{{ section.settings.payment_icon_2 | image_url: height: 30 }}" alt="Payment Method 2" style="height: 30px; width: auto;">
          {%- else -%}
             <img src="{{ 'icon-visa-custom.png' | asset_url }}" alt="Visa" style="height: 30px; width: auto;">
          {%- endif -%}

          {%- if section.settings.payment_icon_3 != blank -%}
            <img src="{{ section.settings.payment_icon_3 | image_url: height: 30 }}" alt="Payment Method 3" style="height: 30px; width: auto;">
          {%- else -%}
             <img src="{{ 'icon-troy-custom.png' | asset_url }}" alt="Troy" style="height: 30px; width: auto;">
          {%- endif -%}
        </div>
      </div>
      <div class="footer__copyright">
        {%- if section.settings.copyright_text != blank -%}
          <p>{{ section.settings.copyright_text }}</p>
        {%- else -%}
          <p>&copy; {{ 'now' | date: "%Y" }} {{ shop.name }}. Tüm hakları saklıdır.</p>
        {%- endif -%}
      </div>
    </div>
  </div>
</footer>

<script>
  function toggleFooter(heading) {
    if (window.innerWidth >= 990) return; // Disable on desktop
    const column = heading.parentElement;
    column.classList.toggle('active');
  }
</script>

{% schema %}
{
  "name": "Footer",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "color",
      "id": "custom_background_color",
      "label": "Custom Background Color",
      "default": "#f4f4ec"
    },
    {
      "type": "color",
      "id": "footer_text_color",
      "label": "Footer Text Color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Logo"
    },
    {
      "type": "image_picker",
      "id": "footer_logo",
      "label": "Footer Logo"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 50,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Logo width",
      "default": 100
    },
    {
      "type": "checkbox",
      "id": "show_social",
      "default": true,
      "label": "Show social media icons"
    },
    {
      "type": "header",
      "content": "Payment Methods"
    },
    {
      "type": "text",
      "id": "payment_heading",
      "label": "Payment Heading",
      "default": "Ödeme Yöntemleri:"
    },
    {
      "type": "image_picker",
      "id": "payment_icon_1",
      "label": "Payment Icon 1"
    },
    {
      "type": "image_picker",
      "id": "payment_icon_2",
      "label": "Payment Icon 2"
    },
    {
      "type": "image_picker",
      "id": "payment_icon_3",
      "label": "Payment Icon 3"
    },
    {
      "type": "header",
      "content": "Copyright"
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Copyright Text",
      "info": "Leave blank to use default copyright."
    }
  ],
  "blocks": [
    {
      "type": "link_column",
      "name": "Link Column",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Quick Links"
        },
        {
          "type": "text",
          "id": "link_1_text",
          "label": "Link 1 Text"
        },
        {
          "type": "url",
          "id": "link_1_url",
          "label": "Link 1 URL"
        },
        {
          "type": "text",
          "id": "link_2_text",
          "label": "Link 2 Text"
        },
        {
          "type": "url",
          "id": "link_2_url",
          "label": "Link 2 URL"
        },
        {
          "type": "text",
          "id": "link_3_text",
          "label": "Link 3 Text"
        },
        {
          "type": "url",
          "id": "link_3_url",
          "label": "Link 3 URL"
        },
        {
          "type": "text",
          "id": "link_4_text",
          "label": "Link 4 Text"
        },
        {
          "type": "url",
          "id": "link_4_url",
          "label": "Link 4 URL"
        },
        {
          "type": "text",
          "id": "link_5_text",
          "label": "Link 5 Text"
        },
        {
          "type": "url",
          "id": "link_5_url",
          "label": "Link 5 URL"
        }
      ]
    }
  ]
}
{% endschema %}
