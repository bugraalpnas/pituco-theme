<link rel="stylesheet" href="{{ 'component-list-menu.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-search.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-menu-drawer.css' | asset_url }}" media="print" onload="this.media='all'">
<link rel="stylesheet" href="{{ 'component-cart-notification.css' | asset_url }}" media="print" onload="this.media='all'">

{%- if settings.predictive_search_enabled -%}
  <link rel="stylesheet" href="{{ 'component-price.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}

{%- if section.settings.menu_type_desktop == 'mega' -%}
  <link rel="stylesheet" href="{{ 'component-mega-menu.css' | asset_url }}" media="print" onload="this.media='all'">
{%- endif -%}


<style>
  header-drawer {
    justify-self: start;
    margin-left: -1.2rem;
  }

  {%- if section.settings.sticky_header_type == 'reduce-logo-size' -%}
    .scrolled-past-header .header__heading-logo-wrapper {
      width: 75%;
    }
  {%- endif -%}

  {%- if section.settings.menu_type_desktop != "drawer" -%}
    @media screen and (min-width: 990px) {
      header-drawer {
        display: none;
      }
    }
  {%- endif -%}

  .menu-drawer-container {
    display: flex;
  }

  .list-menu {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .list-menu--inline {
    display: inline-flex;
    flex-wrap: wrap;
  }

  summary.list-menu__item {
    padding-right: 2.7rem;
  }

  .list-menu__item {
    display: flex;
    align-items: center;
    line-height: calc(1 + 0.3 / var(--font-body-scale));
  }

  .list-menu__item--link {
    text-decoration: none;
    padding-bottom: 1rem;
    padding-top: 1rem;
    line-height: calc(1 + 0.8 / var(--font-body-scale));
  }

  @media screen and (min-width: 750px) {
    .list-menu__item--link {
      padding-bottom: 0.5rem;
      padding-top: 0.5rem;
    }
  }

  /* Header Scroll Effects */
  .header-wrapper {
    background-color: #000000; /* Initial background (Dark) */
    transition: background-color 0.3s ease;
  }

  .section-header.scrolled-past-header .header-wrapper {
    background-color: #f4f4ec; /* Scrolled background (Light) */
  }

  .header__heading-logo.logo-scrolled {
    display: none;
  }

  .section-header.scrolled-past-header .header__heading-logo.logo-initial {
    display: none;
  }

  .section-header.scrolled-past-header .header__heading-logo.logo-scrolled {
    display: block;
  }

  /* Header Text & Icon Colors - Initial (White) */
  .header__icon,
  .list-menu__item,
  .header__menu-item,
  .header__active-menu-item {
    color: #f4f4ec;
  }

  .header__icon .icon,
  .header__icon .svg-wrapper > svg {
    fill: #f4f4ec;
    color: #f4f4ec;
  }
  
  /* Header Text & Icon Colors - Scrolled (Black) */
  .section-header.scrolled-past-header .header__icon,
  .section-header.scrolled-past-header .list-menu__item,
  .section-header.scrolled-past-header .header__menu-item,
  .section-header.scrolled-past-header .header__active-menu-item {
    color: #000000;
    transition: color 0.3s ease;
  }

  .section-header.scrolled-past-header .header__icon .icon,
  .section-header.scrolled-past-header .header__icon .svg-wrapper > svg {
    fill: #000000;
    color: #000000;
    transition: fill 0.3s ease, color 0.3s ease;
  }

  /* Ensure header is fully visible when scrolled */
  .section-header.scrolled-past-header {
    transform: translateY(0) !important;
    top: 0 !important;
    opacity: 1 !important;
  }

  /* Centered/Distributed logo for mobile and tablet only */
  @media screen and (max-width: 989px) {
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    .header__heading {
      margin: 0;
      flex-grow: 1;
      text-align: center;
    }

    .header__heading-link {
       display: inline-block;
    }

    .header__icons {
      display: flex;
      gap: 0.5rem;
    }

    header-drawer {
      margin: 0;
    }

    /* Mobile Header Colors - Scrolled */
    .section-header.scrolled-past-header .header-wrapper {
      background-color: {{ section.settings.mobile_bg_scrolled | default: '#f4f4ec' }};
    }
    .section-header.scrolled-past-header .header__icon,
    .section-header.scrolled-past-header .list-menu__item,
    .section-header.scrolled-past-header .header__menu-item,
    .section-header.scrolled-past-header .header__active-menu-item {
      color: {{ section.settings.mobile_text_scrolled | default: '#000000' }};
    }
    .section-header.scrolled-past-header .header__icon .icon,
    .section-header.scrolled-past-header .header__icon .svg-wrapper > svg {
      fill: {{ section.settings.mobile_text_scrolled | default: '#000000' }};
      color: {{ section.settings.mobile_text_scrolled | default: '#000000' }};
    }

    /* Lock Mobile Menu Drawer Colors to Initial State */
    .menu-drawer {
      background-color: {{ section.settings.mobile_bg_initial | default: '#000000' }} !important;
    }
    .menu-drawer .menu-drawer__menu-item,
    .menu-drawer .menu-drawer__close-button,
    .menu-drawer .menu-drawer__utility-links,
    .menu-drawer .list-social__item .icon {
      color: {{ section.settings.mobile_text_initial | default: '#f4f4ec' }} !important;
    }
    .menu-drawer .icon,
    .menu-drawer .svg-wrapper > svg {
      fill: {{ section.settings.mobile_text_initial | default: '#f4f4ec' }} !important;
      color: {{ section.settings.mobile_text_initial | default: '#f4f4ec' }} !important;
    }
    
    /* Mobile Logo Switching */
    .header__heading-logo.mobile-logo-initial,
    .header__heading-logo.mobile-logo-scrolled {
        display: none; /* Hidden by default, controlled below */
        transform: scale({{ section.settings.mobile_logo_scale | default: 1.0 }});
        transform-origin: center;
    }
    
    /* Initial State: Show Initial Logo */
    .section-header:not(.scrolled-past-header) .header__heading-logo.mobile-logo-initial {
        display: block;
    }
    
    /* Scrolled State: Show Scrolled Logo */
    .section-header.scrolled-past-header .header__heading-logo.mobile-logo-scrolled {
        display: block;
    }
    
    /* Fallback if scrolled logo is missing, keep initial */
    .section-header.scrolled-past-header .header__heading-logo.mobile-logo-initial:last-child {
         display: block;
    }
  }
</style>

{%- style -%}
  .header {
    padding: {{ section.settings.padding_top | times: 0.5 | round: 0 }}px 1.5rem {{ section.settings.padding_bottom | times: 0.5 | round: 0 }}px 1.5rem;
  }

  .section-header {
    position: sticky; /* This is for fixing a Safari z-index issue. PR #2147 */
    margin-bottom: {{ section.settings.margin_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-header {
      margin-bottom: {{ section.settings.margin_bottom }}px;
    }
  }

  @media screen and (min-width: 990px) {
    .header {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<script src="{{ 'cart-notification.js' | asset_url }}" defer="defer"></script>

{%- liquid
  for block in section.blocks
    if block.type == '@app'
      assign has_app_block = true
    endif
  endfor
-%}

{% liquid
  assign header_tag = 'div'

  if section.settings.sticky_header_type != 'none'
    assign header_tag = 'sticky-header'
  endif
%}

<{{ header_tag }} {% if header_tag == 'sticky-header' %}data-sticky-type="{{ section.settings.sticky_header_type }}"{% endif %} class="header-wrapper color-{{ section.settings.color_scheme }} gradient{% if section.settings.show_line_separator %} header-wrapper--border-bottom{% endif %}">
  {%- liquid
    assign social_links = false
    assign localization_forms = false

    if settings.social_twitter_link != blank or settings.social_facebook_link != blank or settings.social_pinterest_link != blank or settings.social_instagram_link != blank or settings.social_youtube_link != blank or settings.social_vimeo_link != blank or settings.social_tiktok_link != blank or settings.social_tumblr_link != blank or settings.social_snapchat_link != blank
      assign social_links = true
    endif

    if localization.available_countries.size > 1 and section.settings.enable_country_selector or section.settings.enable_language_selector and localization.available_languages.size > 1
      assign localization_forms = true
    endif
  -%}
  <header class="header header--{{ section.settings.logo_position }} header--mobile-{{ section.settings.mobile_logo_position }} page-width{% if section.settings.menu_type_desktop == 'drawer' %} drawer-menu{% endif %}{% if section.settings.menu != blank %} header--has-menu{% endif %}{% if has_app_block %} header--has-app{% endif %}{% if social_links %} header--has-social{% endif %}{% if shop.customer_accounts_enabled %} header--has-account{% endif %}{% if localization_forms %} header--has-localizations{% endif %}">
    {%- liquid
      if section.settings.menu != blank
        render 'header-drawer'
      endif

      if section.settings.logo_position == 'top-center' or section.settings.menu == blank
        render 'header-search', input_id: 'Search-In-Modal-1'
      endif
    -%}

    {%- if section.settings.logo_position != 'middle-center' -%}
      {%- if request.page_type == 'index' -%}
        <h1 class="header__heading">
      {%- endif -%}
          <a href="{{ routes.root_url }}" class="header__heading-link link link--text focus-inset">
              <div class="header__heading-logo-wrapper">
                {%- assign logo_width = section.settings.logo_width_desktop | default: 100 -%}
                {%- assign mobile_logo_width = section.settings.mobile_logo_width | default: 100 -%}
                
                <!-- Desktop Logo -->
                <img
                  src="{{ 'pituco-logo-initial.png' | asset_url }}"
                  alt="{{ shop.name | escape }}"
                  style="width: {{ logo_width }}px; height: auto;"
                  width="{{ logo_width }}"
                  class="header__heading-logo logo-initial small-hide"
                >
                <img
                  src="{{ 'pituco-logo-scrolled.png' | asset_url }}"
                  alt="{{ shop.name | escape }}"
                  style="width: {{ logo_width }}px; height: auto;"
                  width="{{ logo_width }}"
                  class="header__heading-logo logo-scrolled small-hide"
                >

                <!-- Mobile Logo -->
                {%- if section.settings.mobile_logo_initial != blank -%}
                  <img
                    src="{{ section.settings.mobile_logo_initial | image_url: width: mobile_logo_width }}"
                    alt="{{ shop.name | escape }}"
                    style="width: {{ mobile_logo_width }}px; height: auto;"
                    width="{{ mobile_logo_width }}"
                    class="header__heading-logo mobile-logo-initial medium-hide large-up-hide"
                  >
                {%- endif -%}

                {%- if section.settings.mobile_logo_scrolled != blank -%}
                  <img
                    src="{{ section.settings.mobile_logo_scrolled | image_url: width: mobile_logo_width }}"
                    alt="{{ shop.name | escape }}"
                    style="width: {{ mobile_logo_width }}px; height: auto;"
                    width="{{ mobile_logo_width }}"
                    class="header__heading-logo mobile-logo-scrolled medium-hide large-up-hide"
                  >
                {%- endif -%}
              </div>
          </a>
      {%- if request.page_type == 'index' -%}
        </h1>
      {%- endif -%}
    {%- endif -%}

    <style>
      .header__menu-wrapper {
        display: flex;
        align-items: center;
        position: relative;
        flex-grow: 1;
        overflow: hidden;
        margin: 0 1rem;
      }

      .header__menu-scroll-container {
        display: flex;
        overflow-x: auto;
        white-space: nowrap;
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
        scroll-behavior: smooth;
        width: 100%;
      }

      .header__menu-scroll-container::-webkit-scrollbar {
        display: none; /* Webkit */
      }

      .header__menu-arrow {
        background: none;
        border: none;
        cursor: pointer;
        padding: 0;
        z-index: 2;
        display: none;
        align-items: center;
        justify-content: center;
        width: 3rem;
        height: 3rem;
        flex-shrink: 0;
      }
      
      .header__menu-arrow.visible {
        display: flex;
      }

      .header__menu-arrow--left {
        transform: rotate(90deg);
      }

      .header__menu-arrow--right {
  ]
}
{% endschema %}
